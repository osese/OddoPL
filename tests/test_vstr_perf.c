#include "vstr.h"
#include <stdio.h>
#include <time.h>
#include <math.h>

#define run_test_x(X)\
    for(int i=3; i<9; i++){ \
        long total = 0;\
        int n = pow(10, i);\
        for(int j=0; j<10; j++){\
            long x;\
            clock();\
                X(n);\
            x = clock();\
            total += x;\
        }\
        printf("For %E input it takes %f ms.\n", (float)n, (float)total / 10);\
    }

void test_split();

int main(){
    run_test_x(test_split);
}


void test_split(int n){ 
    /*  with -03
    For 1.000000E+003 input it takes 0.000000 ms.
    For 1.000000E+004 input it takes 15.000000 ms.
    For 1.000000E+005 input it takes 46.299999 ms.
    For 1.000000E+006 input it takes 293.000000 ms.
    For 1.000000E+007 input it takes 2749.899902 ms.
    For 1.000000E+008 input it takes 27169.699219 ms.
    */
   /* without optimization
    For 1.000000E+003 input it takes 29.200001 ms.
    For 1.000000E+004 input it takes 241.399994 ms.
    For 1.000000E+005 input it takes 2258.399902 ms.
    For 1.000000E+006 input it takes 22563.400391 ms.
   */
    
    srand(time(NULL));
    char* str = "01234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151\
16117118119120121122123124125126127128129130131132133134135136137138139140141142\
14314414514614714814915015115215315415515615715815916016116216316416516616716816\
91701711721731741751761771781791801811821831841851861871881891901911921931941951\
96197198199200201202203204205206207208209210211212213214215216217218219220221222\
22322422522622722822923023123223323423523623723823924024124224324424524624724824\
92502512522532542552562572582592602612622632642652662672682692702712722732742752\
76277278279280281282283284285286287288289290291292293294295296297298299300301302\
30330430530630730830931031131231331431531631731831932032132232332432532632732832\
93303313323333343353363373383393403413423433443453463473483493503513523533543553\
56357358359360361362363364365366367368369370371372373374375376377378379380381382\
38338438538638738838939039139239339439539639739839940040140240340440540640740840\
94104114124134144154164174184194204214224234244254264274284294304314324334344354\
36437438439440441442443444445446447448449450451452453454455456457458459460461462\
46346446546646746846947047147247347447547647747847948048148248348448548648748848\
94904914924934944954964974984995005015025035045055065075085095105115125135145155\
16517518519520521522523524525526527528529530531532533534535536537538539540541542\
54354454554654754854955055155255355455555655755855956056156256356456556656756856\
95705715725735745755765775785795805815825835845855865875885895905915925935945955\
96597598599600601602603604605606607608609610611612613614615616617618619620621622\
62362462562662762862963063163263363463563663763863964064164264364464564664764864\
96506516526536546556566576586596606616626636646656666676686696706716726736746756\
76677678679680681682683684685686687688689690691692693694695696697698699700701702\
70370470570670770870971071171271371471571671771871972072172272372472572672772872\
97307317327337347357367377387397407417427437447457467477487497507517527537547557\
56757758759760761762763764765766767768769770771772773774775776777778779780781782\
78378478578678778878979079179279379479579679779879980080180280380480580680780880\
98108118128138148158168178188198208218228238248258268278288298308318328338348358\
36837838839840841842843844845846847848849850851852853854855856857858859860861862\
86386486586686786886987087187287387487587687787887988088188288388488588688788888\
98908918928938948958968978988999009019029039049059069079089099109119129139149159\
16917918919920921922923924925926927928929930931932933934935936937938939940941942\
94394494594694794894995095195295395495595695795895996096196296396496596696796896\
99709719729739749759769779789799809819829839849859869879889899909919929939949959\
96997998999";

    vstr_t v1 = v_str_create_from(str);
    int t;
    int k  = 0;
    int l = 1000;
    for(int i = 0; i < n; i++){
       
        if(k > l){
            t = k; 
            k = l; 
            l = t;
        }
        vstr_t temp = v_str_at_from_to(v1, k, l);
        v_str_free(temp);
    }

    
}